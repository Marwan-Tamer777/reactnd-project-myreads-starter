(this["webpackJsonpmyreads-app"]=this["webpackJsonpmyreads-app"]||[]).push([[0],{19:function(e,s,t){},26:function(e,s,t){},27:function(e,s,t){"use strict";t.r(s);var o=t(1),a=t.n(o),c=t(13),i=t.n(c);const n="https://reactnd-books-api.udacity.com";let r=localStorage.token;r||(r=localStorage.token=Math.random().toString(36).substr(-8));const l={Accept:"application/json",Authorization:r};t(19);var h=t(2),d=t(5),b=t(0);class j extends a.a.Component{constructor(){super(...arguments),this.state={option:void 0===this.props.book.shelf?"none":this.props.book.shelf}}async updateOptions(e,s){await((e,s)=>fetch("".concat(n,"/books/").concat(e.id),{method:"PUT",headers:{...l,"Content-Type":"application/json"},body:JSON.stringify({shelf:s})}).then((e=>e.json())))(e,s).then((e=>console.log("updated book: ",e))).then((()=>this.setState({option:s}))).then(this.props.updateParent)}componentDidMount(){void 0===this.props.confirmBook||void 0===this.props.confirmBook(this.props.book)?console.log(""):this.setState({option:this.props.confirmBook(this.props.book).shelf})}render(){return Object(b.jsxs)("div",{className:"book",children:[Object(b.jsxs)("div",{className:"book-top",children:[Object(b.jsx)("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:void 0===this.props.book.imageLinks?"":'url("'.concat(this.props.book.imageLinks.thumbnail,'")')}}),Object(b.jsx)("div",{className:"book-shelf-changer",children:Object(b.jsxs)("select",{value:this.state.option,onChange:e=>this.updateOptions(this.props.book,e.target.value),children:[Object(b.jsx)("option",{value:"move",disabled:!0,children:"Move to..."}),Object(b.jsx)("option",{value:"currentlyReading",children:"Currently Reading"}),Object(b.jsx)("option",{value:"wantToRead",children:"Want to Read"}),Object(b.jsx)("option",{value:"read",children:"Read"}),Object(b.jsx)("option",{value:"none",children:"None"})]})})]}),Object(b.jsx)("div",{className:"book-title",children:this.props.book.title}),Object(b.jsx)("div",{className:"book-authors",children:(void 0===this.props.book.authors?[]:this.props.book.authors).map(((e,s)=>Object(b.jsx)("p",{children:e},s)))})]})}}var p=j;class k extends a.a.Component{constructor(){super(...arguments),this.state={searchedBooks:[],empty:0}}async displaySearch(e){var s;""===e?setTimeout((()=>this.setState({searchedBooks:[],empty:0})),1e3):await(s=e,fetch("".concat(n,"/search"),{method:"POST",headers:{...l,"Content-Type":"application/json"},body:JSON.stringify({query:s})}).then((e=>e.json())).then((e=>e.books))).then((e=>void 0===e.error?this.setState({searchedBooks:e,empty:0}):this.setState({searchedBooks:[],empty:1})))}render(){return Object(b.jsxs)("div",{className:"search-books",children:[Object(b.jsxs)("div",{className:"search-books-bar",children:[Object(b.jsx)(d.b,{to:"/",className:"close-search",children:"Close"}),Object(b.jsx)("div",{className:"search-books-input-wrapper",children:Object(b.jsx)("input",{type:"text",placeholder:"Search by title or author",onInput:e=>this.displaySearch(e.target.value)})})]}),Object(b.jsx)("div",{className:"search-books-results",children:Object(b.jsx)("ol",{className:"books-grid",children:(console.log("searched books: ",this.state.searchedBooks),1===this.state.empty?Object(b.jsx)("div",{children:"we couldn't find any books sadly"}):this.state.searchedBooks.map(((e,s)=>Object(b.jsx)("li",{children:Object(b.jsx)(p,{book:e,updateParent:this.props.updateBook,confirmBook:this.props.confirm})},s))))})})]})}}var m=k;var u=function(e){const{books:s,update:t}=e;return console.log("all books:",s),Object(b.jsxs)("div",{className:"list-books",children:[Object(b.jsx)("div",{className:"list-books-title",children:Object(b.jsx)("h1",{children:"MyReads"})}),Object(b.jsx)("div",{className:"list-books-content",children:Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{className:"bookshelf",children:[Object(b.jsx)("h2",{className:"bookshelf-title",children:"Currently Reading"}),Object(b.jsx)("div",{className:"bookshelf-books",children:Object(b.jsx)("ol",{className:"books-grid",children:s.filter((e=>"currentlyReading"===e.shelf)).map(((e,s)=>Object(b.jsx)("li",{children:Object(b.jsx)(p,{book:e,updateParent:t})},s)))})})]}),Object(b.jsxs)("div",{className:"bookshelf",children:[Object(b.jsx)("h2",{className:"bookshelf-title",children:"Want to Read"}),Object(b.jsx)("div",{className:"bookshelf-books",children:Object(b.jsx)("ol",{className:"books-grid",children:s.filter((e=>"wantToRead"===e.shelf)).map(((e,s)=>Object(b.jsx)("li",{children:Object(b.jsx)(p,{book:e,updateParent:t})},s)))})})]}),Object(b.jsxs)("div",{className:"bookshelf",children:[Object(b.jsx)("h2",{className:"bookshelf-title",children:"Read"}),Object(b.jsx)("div",{className:"bookshelf-books",children:Object(b.jsx)("ol",{className:"books-grid",children:s.filter((e=>"read"===e.shelf)).map(((e,s)=>Object(b.jsx)("li",{children:Object(b.jsx)(p,{book:e,updateParent:t})},s)))})})]})]})}),Object(b.jsx)("div",{className:"open-search",children:Object(b.jsx)(d.b,{to:"/search",className:"add-button",children:"Add a book"})})]})};class x extends a.a.Component{constructor(){super(...arguments),this.state={allbooks:[]},this.getAllBooks=async()=>await fetch("".concat(n,"/books"),{headers:l}).then((e=>e.json())).then((e=>e.books)).then((e=>this.setState({allbooks:e}))),this.bookAlreadyIn=e=>this.state.allbooks.filter((s=>s.title===e.title))[0]}componentDidMount(){this.getAllBooks()}render(){return Object(b.jsxs)("div",{className:"app",children:[Object(b.jsx)(h.a,{exact:!0,path:"/",render:()=>Object(b.jsxs)("div",{children:["  ",Object(b.jsx)(u,{books:this.state.allbooks,update:this.getAllBooks})]})}),Object(b.jsx)(h.a,{path:"/search",render:()=>Object(b.jsx)(m,{updateBook:this.getAllBooks,confirm:this.bookAlreadyIn})})]})}}var O=x;t(26);i.a.render(Object(b.jsxs)(d.a,{children:[" ",Object(b.jsx)(O,{})," "]}),document.getElementById("root"))}},[[27,1,2]]]);
//# sourceMappingURL=main.d08c0b56.chunk.js.map